---
import Divider from "@/components/Divider.astro";
import WhatsappIcon from "@/components/icons/WhatsappIcon.astro";
import { hasHtmlTags } from "@/utils";

const {
  title,
  description,
  benefits = [],
  whatsappLink,
  whatsappText = "Contáctanos",
} = Astro.props;
---

<div class="course-benefits-container">
  <div class="course-benefits-title">
    <h2>{title}</h2>
    <Divider width="60%" />
  </div>

  {description && <p class="course-benefits-description">{description}</p>}

  <div class="course-benefits-list">
    {
      benefits.map(({ title: benefitTitle, text, icon: Icon }: any) => (
        <div class="course-benefit-card">
          <div class="card-content">
            {Icon && (
              <div class="benefit-icon-container">
                <Icon class="benefit-icon" />
              </div>
            )}

            {benefitTitle &&
              (hasHtmlTags(benefitTitle) ? (
                <Fragment set:html={benefitTitle} />
              ) : (
                <h3>{benefitTitle}</h3>
              ))}

            {hasHtmlTags(text) ? <Fragment set:html={text} /> : <p>{text}</p>}
          </div>
        </div>
      ))
    }
  </div>

  <!-- Botón de WhatsApp -->
  {
    whatsappLink && (
      <a
        class="cs-btn cs-bg-green-wh cs-color-white"
        href={whatsappLink}
        target="_blank"
      >
        {whatsappText} <WhatsappIcon class="whatsapp-icon" />
      </a>
    )
  }
</div>

<style is:global>
  /* Contenedor principal */
  .course-benefits-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--size-1);
    padding: 1rem 1.8rem;
    font-size: 1rem;
    max-height: 95vh;
    min-width: 55vw;

    /* Título */
    .course-benefits-title {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
    }
    .course-benefits-title h2 {
      font-size: 1.5rem !important;
      font-weight: 900;
      color: var(--color-blue-700);
      text-align: center;
    }

    /* Descripción */
    .course-benefits-description {
      text-align: center;
      max-width: 700px;
    }

    /* Lista de tarjetas */
    .course-benefits-list {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    /* Tarjeta individual */
    .course-benefit-card {
      width: var(--size-20);
      background-color: white;
      border-radius: 22px;
      position: relative;
      box-shadow:
        0 0 5px rgba(78, 105, 105, 0.1),
        0 2px 7px rgba(78, 105, 105, 0.1),
        0 4px 4px -2px rgba(78, 105, 105, 0.1);
    }
    .course-benefit-card::before {
      content: "";
      position: absolute;
      inset: -2px;
      border-radius: 22px;
      background: linear-gradient(45deg, #77dbff, #ffffff, #ffffff, #88ffa4);
      filter: blur(22px);
      z-index: -1;
      opacity: 0.6;
    }
    .course-benefit-card::after {
      position: absolute;
      content: "";
      top: 0;
      width: 100%;
      height: 100%;
      border-radius: 22px;
      border: 2.5px solid transparent;
      -webkit-mask:
        linear-gradient(#fff 0 0) padding-box,
        linear-gradient(#fff 0 0);
      -webkit-mask-composite: destination-out;
      mask-composite: exclude;
      background: linear-gradient(
          45deg,
          #62d1f9,
          #ffffff,
          #ffffff,
          #ffffff,
          #ffffff,
          #82fd9f
        )
        border-box;
    }

    /* Contenido de tarjeta */
    .card-content {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
      padding: 1rem;
      text-align: center;
    }

    /* Icono */
    .benefit-icon-container {
      margin: 0 auto;
      width: 2.1rem;
      height: 2.1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0.25rem;
      background: linear-gradient(
        135deg,
        var(--bg-blue-400),
        var(--bg-green-400)
      );
      border-radius: 50%;
    }
    .benefit-icon {
      width: 1.6rem;
      height: 1.6rem;
      color: white;
    }

    /* Título del beneficio */
    .card-content h3 {
      font-size: 1.2rem;
      font-weight: 900;
      color: var(--color-blue-700);
    }

    .card-content span {
      font-size: 0.95rem;
      margin-top: -1rem;
    }
  }

  /* Responsivo */
  @media (width <= 1600px) {
    .course-benefits-container {
      width: 70%;
    }
  }
  @media (width <= 800px) {
    .course-benefits-container {
      width: 85%;

      .course-benefits-list {
        flex-direction: column;
        align-items: center;
      }
      .course-benefit-card {
        width: var(--size-30);
      }
    }
  }
  @media (width <= 576px) {
    .course-benefits-container {
      width: 98%;
    }
  }
</style>
